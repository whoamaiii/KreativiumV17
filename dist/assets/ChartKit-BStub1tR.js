import{j as S}from"./vendor-ui-BGGfvU-n.js";import{a as v,d as L}from"./vendor-react-BiKKw5Rc.js";import{A as P,C as T,a as j,b as z,S as O,M as V,P as W,c as F,d as _,e as D,f as B,g as G,h as U,i as H,j as Y,k as J,l as K,m as Z,n as X,o as q,p as Q,q as ee,r as te,s as oe,t as se,u as ie,v as ae,w as re,x as ne,y as le,z as ce,B as $,D as de,E as ue,F as me,G as ye,H as pe,I as he,J as ge,K as fe,L as ve,N as be,O as xe,Q as Se,R as Ae,T as we,U as Ce,V as Ee,W as Ie,X as $e,Y as N,Z as Me,_ as Ne,$ as ke,a0 as Re,a1 as Le,a2 as Pe,a3 as Te,a4 as je,a5 as ze,a6 as Oe,a7 as Ve,a8 as We,a9 as Fe,aa as _e,ab as De,ac as Be,ad as Ge,ae as Ue,af as He}from"./charts-B1guaMDk.js";import{a as Ye}from"./index-p40y1I9K.js";import"./logger-Bi5o39IC.js";import{S as Je}from"./skeleton-Cw78M60-.js";import{chartRegistry as M}from"./chartRegistry-BLFZNPaW.js";const Ke=Object.freeze(Object.defineProperty({__proto__:null,Axis:P,ChartView:T,ComponentModel:j,ComponentView:z,List:O,Model:V,PRIORITY:W,SeriesModel:F,color:_,connect:D,dataTool:B,dependencies:G,disConnect:U,disconnect:H,dispose:Y,env:J,extendChartView:K,extendComponentModel:Z,extendComponentView:X,extendSeriesModel:q,format:Q,getCoordinateSystemDimensions:ee,getInstanceByDom:te,getInstanceById:oe,getMap:se,graphic:ie,helper:ae,init:re,innerDrawElementOnCanvas:ne,matrix:le,number:ce,parseGeoJSON:$,parseGeoJson:$,registerAction:de,registerCoordinateSystem:ue,registerLayout:me,registerLoading:ye,registerLocale:pe,registerMap:he,registerPostInit:ge,registerPostUpdate:fe,registerPreprocessor:ve,registerProcessor:be,registerTheme:xe,registerTransform:Se,registerUpdateLifecycle:Ae,registerVisual:we,setCanvasCreator:Ce,setPlatformAPI:Ee,throttle:Ie,time:$e,use:N,util:Me,vector:Ne,version:ke,zrUtil:Re,zrender:Le},Symbol.toStringTag,{value:"Module"}));N([Pe,Te,je,ze,Oe,Ve,We,Fe,_e,De,Be,Ge,Ue]);function Ze(e){const o=v.useCallback(n=>{try{const d=e.current?.getEchartsInstance?.();return d?d.getDataURL({type:"png",pixelRatio:n?.pixelRatio??2,backgroundColor:n?.backgroundColor??"#ffffff"}):void 0}catch{return}},[e]),s=v.useCallback(()=>{try{const n=e.current?.getEchartsInstance?.();return n?.renderToSVGString?n.renderToSVGString():void 0}catch{return}},[e]);return{getImage:o,getSVG:s}}const f={happy:"hsl(90 70% 65%)",calm:"hsl(180 45% 75%)",anxious:"hsl(40 65% 70%)",sad:"hsl(220 45% 65%)",excited:"hsl(280 55% 70%)",overwhelmed:"hsl(300 40% 60%)",neutral:"hsl(240 8% 63%)"},g={color:["hsl(var(--primary))",f.calm,f.happy,f.anxious,f.sad,f.excited,f.overwhelmed,f.neutral],backgroundColor:"transparent",textStyle:{color:"hsl(var(--foreground))",fontFamily:"Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial",fontSize:13},grid:{top:48,right:24,bottom:48,left:56,containLabel:!0,backgroundColor:"rgba(0, 0, 0, 0.02)",borderColor:"transparent"},axisPointer:{lineStyle:{color:"hsl(var(--primary))",width:2,type:"dashed"},label:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--primary))",borderWidth:1,color:"hsl(var(--foreground))",fontSize:12,padding:[4,8]}},tooltip:{trigger:"axis",confine:!0,appendToBody:!0,transitionDuration:0,enterable:!0,backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--primary) / 0.5)",borderWidth:1,textStyle:{color:"hsl(var(--foreground))",fontSize:14,fontWeight:500},padding:[12,16],formatter:function(e){const o=t=>typeof t=="number"?t:Number(t),s=t=>{const a=o(t);return Number.isFinite(a)?a.toFixed(1):String(t??"")},n=t=>{const a={happy:"ðŸ˜Š",sad:"ðŸ˜¢",anxious:"ðŸ˜°",calm:"ðŸ˜Œ",excited:"ðŸ¤—",angry:"ðŸ˜¤",overwhelmed:"ðŸ˜µ",default:"ðŸ”µ"};return typeof t=="string"&&a[t.toLowerCase()]||a.default},d=t=>{if(!t)return;const a=t.toLowerCase();if(a.includes("avg emotion intensity"))return"avgEmotionIntensity";if(a.includes("7d")||a.includes("ma"))return"avgEmotionIntensityMA7";if(a.includes("positive"))return"positiveEmotions";if(a.includes("negative"))return"negativeEmotions";if(a.includes("sensory"))return"totalSensoryInputs"},i=t=>{const a=t.encode?.y;let r=Array.isArray(a)?a[0]:a;if(r==null){const l=d(t.seriesName);l&&(r=l)}if(typeof t?.value=="number")return t.value;if(Array.isArray(t?.value)&&typeof r=="number")return t.value[r];if(t?.value&&typeof t.value=="object"&&!Array.isArray(t.value)){if(typeof r=="string"&&r in t.value)return t.value[r];const l=t.value;for(const u of Object.keys(l)){const y=l[u];if(typeof y=="number"&&Number.isFinite(y))return y}}return t?.data&&typeof t.data=="object"&&typeof r=="string"&&r in t.data?t.data[r]:t?.value};if(Array.isArray(e)&&e.length>0){let a=`<div class="chart-tooltip-header">${e[0]?.axisValueLabel||""}</div>`;return e.forEach(r=>{const l=r;if(l&&typeof l=="object"){const u=i(l),y=n(l.seriesName);a+=`
                <div class="chart-tooltip-item">
                  <span class="chart-tooltip-icon">${y}</span>
                  <span class="chart-tooltip-label" style="color: ${l.color};">${l.seriesName??""}:</span>
                  <span class="chart-tooltip-value">${s(u)}</span>
                </div>`}}),a}if(e&&typeof e=="object"){const t=e,a=i(t),r=n(t.seriesName);return`
            <div class="chart-tooltip-header">${t.name??""}</div>
            <div class="chart-tooltip-item"> 
              <span class="chart-tooltip-icon">${r}</span>
              <span class="chart-tooltip-label" style="color: ${t.color};">${t.seriesName??""}:</span>
              <span class="chart-tooltip-value">${s(a)}</span>
            </div>`}return""},extraCssText:`
        border-radius: 8px;
        box-shadow: 0 2px 8px hsla(0, 0%, 0%, 0.1);
      
        .chart-tooltip-header {
          font-weight: 600;
          margin-bottom: 8px;
          color: hsl(var(--foreground));
        }
        .chart-tooltip-item {
          display: flex;
          align-items: center;
          gap: 8px;
          margin: 4px 0;
        }
        .chart-tooltip-icon {
          font-size: 16px;
        }
        .chart-tooltip-label {
          font-weight: 500;
        }
        .chart-tooltip-value {
          font-weight: 600;
          color: hsl(var(--foreground));
        }
      `},xAxis:{axisLine:{lineStyle:{color:"hsl(var(--border))",width:2}},axisTick:{show:!0,lineStyle:{color:"hsl(var(--border))"}},axisLabel:{color:"hsl(var(--foreground))",fontSize:12,fontWeight:500,margin:12},splitLine:{lineStyle:{color:"hsl(var(--border) / 0.15)",type:"dashed"}}},yAxis:{axisLine:{show:!0,lineStyle:{color:"hsl(var(--border))",width:2}},axisTick:{show:!0,lineStyle:{color:"hsl(var(--border))"}},axisLabel:{color:"hsl(var(--foreground))",fontSize:12,fontWeight:500,margin:12},splitLine:{lineStyle:{color:"hsl(var(--border) / 0.15)",type:"dashed"}},nameTextStyle:{color:"hsl(var(--muted-foreground))",fontSize:12,padding:[0,0,8,0]}},legend:{show:!0,top:0,right:0,icon:"circle",itemWidth:12,itemHeight:12,itemGap:16,textStyle:{color:"hsl(var(--foreground))",fontSize:14,fontWeight:500},inactiveColor:"hsl(var(--muted-foreground) / 0.5)",pageTextStyle:{color:"hsl(var(--foreground))"}},animation:!0,animationDuration:800,animationEasing:"cubicOut"};function Xe({option:e,className:o,height:s=320,width:n="100%",onEvents:d,style:i,chartDefaults:t,__innerChartRef__:a}){const r=v.useMemo(()=>{try{if(!e||typeof e!="object")return{series:[],xAxis:{},yAxis:{}};const c=e.series;if(c==null)return{...e,series:[]};if(Array.isArray(c)){const h=c.map(b=>b&&typeof b=="object"?b:{});return{...e,series:h}}return e}catch{return{series:[],xAxis:{},yAxis:{}}}},[e]),l=v.useMemo(()=>{try{const c=r.xAxis,h=r.yAxis,b=m=>Array.isArray(m)?m.map(x=>({...g.xAxis,...x})):{...g.xAxis,...m},w=m=>Array.isArray(m)?m.map(x=>({...g.yAxis,...x})):{...g.yAxis,...m};return(m=>{const x=m.series??[];if(!Array.isArray(x))return m;const k=x.map(I=>{const R={...I.emphasis??{},disabled:!0,focus:"none",blurScope:"global",lineStyle:{opacity:1},itemStyle:{opacity:1,shadowBlur:10,shadowColor:"rgba(255,255,255,0.18)",borderWidth:1,borderColor:"rgba(255,255,255,0.35)"}};return{...I,emphasis:R,blur:{lineStyle:{opacity:1},itemStyle:{opacity:1}},select:{disabled:!0}}});return{...m,series:k}})({...r,backgroundColor:g.backgroundColor,textStyle:{...g.textStyle,...r.textStyle},grid:{...g.grid,...r.grid},xAxis:b(c),yAxis:w(h),color:r.color??g.color,tooltip:{...g.tooltip,...r.tooltip},legend:r.legend,stateAnimation:{duration:0},...t||{}})}catch{return{series:[]}}},[r,t]),u=(()=>{const c=l.series;return Array.isArray(c)?c.length>0:!!c})(),y=v.useMemo(()=>{try{const c=l,h=c.series??[],w=(Array.isArray(h)?h:h?[h]:[]).map(m=>String(m?.type??"")),C=c.yAxis,E=Array.isArray(C)?C.length:1;return JSON.stringify({seriesKinds:w,yAxes:E})}catch{return"shape-default"}},[l]);return S.jsx("div",{className:Ye("rounded-xl border bg-card w-full",o),"data-testid":"echart-container",style:{overflow:"visible",minHeight:typeof s=="number"?s:void 0,width:typeof n=="number"?n:void 0},children:u?S.jsx(He,{option:l,notMerge:!0,lazyUpdate:!1,style:{height:s,width:n??"100%",...i},onEvents:d,echarts:Ke,ref:a},y):S.jsxs("div",{className:"p-4",children:[S.jsx(Je,{className:"h-[240px] w-full rounded-md"}),S.jsx("div",{className:"mt-2 h-4 w-1/3 bg-muted rounded"})]})})}function qe(e){const o=v.useRef(null),s=Ze(o);return L.useEffect(()=>{const n=e.exportRegistration;if(n?.id)return M.register({id:n.id,type:n.type??"custom",title:n.title??"Chart",studentId:n.studentId,getMethods:()=>s}),()=>M.unregister(n.id)},[e.exportRegistration?.id,e.exportRegistration?.title,e.exportRegistration?.studentId,e.exportRegistration?.type,s]),S.jsx(Xe,{...e,__innerChartRef__:o})}const mt=v.memo(qe),Qe=(e,o=1)=>{const s=e.match(/(\d+(\.\d+)?)/g);if(!s||s.length<3)return`rgba(0,0,0,${o})`;let[n,d,i]=s.map(parseFloat);d/=100,i/=100;const t=c=>(c+n/30)%12,a=d*Math.min(i,1-i),r=c=>i-a*Math.max(-1,Math.min(t(c)-3,9-t(c),1)),l=Math.round(255*r(0)),u=Math.round(255*r(8)),y=Math.round(255*r(4));return`rgba(${l},${u},${y},${o})`},et=e=>typeof window>"u"?null:getComputedStyle(document.documentElement).getPropertyValue(e).trim(),A=(e,o=1,s)=>{const n=et(e);return Qe(n||s,o)};function tt(e,o){if(!Number.isFinite(o)||o<=1)return e.slice();const s=new Array(e.length).fill(0);let n=0;for(let d=0;d<e.length;d++){n+=e[d]??0;const i=d-o;i>=0&&(n-=e[i]??0);const t=Math.min(d+1,o);s[d]=Number((n/t).toFixed(2))}return s}function p(e){const o=typeof e=="number"?e:Number(e);return Number.isFinite(o)?o:0}function yt(e,o){const s=e.map(u=>u.date),n=e.map(u=>p(u.avgEmotionIntensity)),d=e.map(u=>p(u.positiveEmotions)),i=e.map(u=>p(u.negativeEmotions)),t=e.map(u=>p(u.totalSensoryInputs)),a=o.showMovingAverage?tt(n,Math.max(2,o.movingAverageWindow)):[],r=[{type:"line",name:"Avg Emotion Intensity",data:n,smooth:!0,showSymbol:!1,sampling:"lttb",lineStyle:{width:3},emphasis:{focus:"none",disabled:!0},blur:{itemStyle:{opacity:1},lineStyle:{opacity:1}},markLine:o.thresholds?.emotion?{silent:!0,data:[{yAxis:o.thresholds.emotion,label:{position:"end",formatter:"Emotion Threshold"},lineStyle:{type:"dashed",width:2}}]}:void 0},...o.showMovingAverage?[{type:"line",name:`Avg Intensity (${o.movingAverageWindow}d MA)`,data:a,smooth:!0,showSymbol:!1,sampling:"lttb",lineStyle:{width:2},emphasis:{focus:"none",disabled:!0},blur:{itemStyle:{opacity:1},lineStyle:{opacity:1}}}]:[],{type:"line",name:"Positive Emotions",data:d,smooth:!0,showSymbol:!1,sampling:"lttb",lineStyle:{width:2},emphasis:{focus:"none",disabled:!0},blur:{itemStyle:{opacity:1},lineStyle:{opacity:1}}},{type:"line",name:"Negative Emotions",data:i,smooth:!0,showSymbol:!1,sampling:"lttb",lineStyle:{width:2},emphasis:{focus:"none",disabled:!0},blur:{itemStyle:{opacity:1},lineStyle:{opacity:1}}},{type:"line",name:"Sensory Inputs",data:t,smooth:!0,showSymbol:!1,sampling:"lttb",lineStyle:{width:2,type:"dashed"},emphasis:{focus:"none",disabled:!0},blur:{itemStyle:{opacity:1},lineStyle:{opacity:1}},yAxisIndex:o.useDualYAxis?1:0,markLine:o.thresholds?.sensory?{silent:!0,data:[{yAxis:o.thresholds.sensory,label:{position:"end",formatter:"Sensory Threshold"},lineStyle:{type:"dashed",width:2}}]}:void 0}];return{title:o.title?{left:"center",top:0,text:o.title}:void 0,legend:{hoverLink:!1,bottom:0,data:["Avg Emotion Intensity",...o.showMovingAverage?[`Avg Intensity (${o.movingAverageWindow}d MA)`]:[],"Positive Emotions","Negative Emotions","Sensory Inputs"],selected:{"Avg Emotion Intensity":!0,...o.showMovingAverage?{[`Avg Intensity (${o.movingAverageWindow}d MA)`]:!0}:{},"Positive Emotions":!0,"Negative Emotions":!0,"Sensory Inputs":!1}},tooltip:{trigger:"axis",confine:!0},toolbox:{show:!0,right:16,top:16,feature:{dataZoom:{yAxisIndex:"none",title:{zoom:"Zoom",back:"Reset"}},restore:{title:"Reset"},saveAsImage:{title:"Save",pixelRatio:2}}},dataZoom:[{type:"inside",start:0,end:100,minValueSpan:7},{show:!0,type:"slider",bottom:50,start:0,end:100,height:20}],xAxis:{type:"category",boundaryGap:!1,data:s},yAxis:o.useDualYAxis?[{type:"value",max:10,min:0,interval:2,name:"Intensity"},{type:"value",name:"Sensory Inputs",alignTicks:!0,min:"dataMin"}]:[{type:"value",max:10,min:0,interval:2,name:"Intensity"}],series:r,grid:{bottom:72}}}function pt(e){const o=e.map(s=>s.date);return{tooltip:{trigger:"axis"},legend:{},xAxis:{type:"category",data:o},yAxis:[{type:"value"}],series:[{type:"line",name:"Avg Emotion Intensity",data:e.map(s=>p(s.avgEmotionIntensity)),smooth:!0,showSymbol:!1,areaStyle:{},lineStyle:{width:3},emphasis:{focus:"none"}},{type:"line",name:"Positive Emotions",data:e.map(s=>p(s.positiveEmotions)),smooth:!0,showSymbol:!1,areaStyle:{},lineStyle:{width:2},emphasis:{focus:"none"}}]}}function ht(e){return{tooltip:{trigger:"item"},legend:{},xAxis:{type:"value",name:"Avg Emotion Intensity"},yAxis:{type:"value",name:"Sensory Inputs"},series:[{name:"Daily Data Points",type:"scatter",data:e.map(o=>[p(o.avgEmotionIntensity),p(o.totalSensoryInputs)]),symbolSize:8,emphasis:{focus:"none"}}]}}function gt(e){const o=e.map(s=>s.date);return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},xAxis:{type:"category",data:o},yAxis:[{type:"value"},{type:"value"}],series:[{type:"bar",name:"Positive Emotions",data:e.map(s=>p(s.positiveEmotions)),yAxisIndex:0,emphasis:{focus:"none"}},{type:"bar",name:"Negative Emotions",data:e.map(s=>p(s.negativeEmotions)),yAxisIndex:0,emphasis:{focus:"none"}},{type:"line",name:"Avg Intensity",data:e.map(s=>p(s.avgEmotionIntensity)),yAxisIndex:1,smooth:!0,lineStyle:{width:3},showSymbol:!1,emphasis:{focus:"none"}}]}}function ft(e){const o=e.factors??[],s=[];for(let i=0;i<e.matrix.length;i++){const t=e.matrix[i]||[];for(let a=0;a<t.length;a++){const r=t[a],l=typeof r=="number"&&Number.isFinite(r)?r:0;s.push([a,i,Number(l.toFixed(2))])}}const n=new Map;for(const i of e.significantPairs||[]){const t=`${i.factor1}__${i.factor2}`,a=`${i.factor2}__${i.factor1}`;n.set(t,{significance:i.significance,correlation:i.correlation}),n.set(a,{significance:i.significance,correlation:i.correlation})}return{grid:{top:80,left:120,right:64,bottom:60,containLabel:!0},xAxis:{type:"category",data:o,axisLabel:{rotate:40,margin:16}},yAxis:{type:"category",data:o,axisLabel:{margin:12}},tooltip:{trigger:"item",confine:!0,appendToBody:!0,formatter:i=>{const t=i?.value?.[1],a=i?.value?.[0],r=o[t]??"",l=o[a]??"",u=`${r}__${l}`,y=n.get(u)?.significance,c=typeof i?.value?.[2]=="number"?i.value[2]:Number(i.value?.[2])||0,h=c>0?"Positive":c<0?"Negative":"Neutral";return`<div style="font-weight:600;margin-bottom:6px">${r} â†” ${l}</div>
                <div>Correlation: <b>${c.toFixed(2)}</b> (${h})</div>
                ${y?`<div>Significance: <b>${y}</b></div>`:""}`}},visualMap:{min:-1,max:1,calculable:!0,orient:"vertical",right:8,top:40,text:["Positiv","Negativ"],inRange:{color:[A("--destructive",1,"0 84% 60%"),A("--muted-foreground",1,"240 8% 63%"),A("--success",1,"142 71% 45%")]},itemWidth:12,itemHeight:100,textStyle:{color:"hsl(var(--muted-foreground))"}},series:[{type:"heatmap",data:s,label:{show:!0,formatter:i=>{const t=typeof i?.value?.[2]=="number"?i.value[2]:Number(i?.value?.[2])||0;return Math.abs(t)>=.25?t.toFixed(2):""}},itemStyle:{borderWidth:1,borderColor:A("--secondary",.5,"247 15% 17%")},emphasis:{disabled:!0,focus:"none"},progressive:0}]}}export{mt as E,gt as a,yt as b,ht as c,pt as d,ft as e};
