import{j as e}from"./vendor-ui-BGGfvU-n.js";import{l as y,a as n}from"./vendor-react-BiKKw5Rc.js";import{B as N}from"./Breadcrumbs-LYkGWA_d.js";import{u as C,C as c,d as p,e as u,n as x,b as h}from"./index-p40y1I9K.js";import{S as v,a as I,b as w,c as M,d as T}from"./select-Df25Jq5p.js";import{d as m}from"./dataStorage-ZXqbZ8jG.js";import{L as k}from"./LazyReportBuilder-ayOTdqok.js";import"./3d-DUDogAyU.js";import"./vendor-utils-BNQKEpbf.js";import"./logger-Bi5o39IC.js";import"./i18n-DNqVcHxj.js";import"./check-JkTn6zF0.js";import"./storageUtils-DyonkL-b.js";import"./LazyLoadWrapper-CBZYyc2T.js";import"./skeleton-Cw78M60-.js";import"./loader-circle-D6K3-BGk.js";import"./file-text-x8qZG1DU.js";const Q=()=>{const{tCommon:s}=C(),[b]=y(),j=b.get("template")??"progress-summary",i=n.useMemo(()=>{try{return m.getStudents()}catch{return[]}},[]),[d,g]=n.useState(""),r=n.useMemo(()=>i.find(t=>t.id===d),[i,d]),o=n.useMemo(()=>{if(!r)return null;let t=[],l=[];try{t=m.getGoals().filter(a=>a.studentId===r.id),l=m.getTrackingEntries().filter(a=>a.studentId===r.id)}catch{t=[],l=[]}const f=l.flatMap(a=>a.emotions),S=l.flatMap(a=>a.sensoryInputs);return{goals:t,entries:l,emotions:f,sensoryInputs:S}},[r]);return e.jsx("main",{className:"min-h-screen px-4 py-8 sm:px-6 lg:px-8",role:"main",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("header",{className:"space-y-2",children:[e.jsx(N,{items:[{label:s("buttons.home"),href:"/"},{label:s("navigation.reports"),href:"/reports/hub"},{label:s("reports.builder.title"),current:!0}]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s("reports.builder.title")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:s("reports.builder.description")})]}),e.jsxs(c,{className:"bg-card border-0 shadow-soft",children:[e.jsxs(p,{children:[e.jsx(u,{children:s("reports.builder.configure")}),e.jsx(x,{children:s("reports.builder.configureDesc")})]}),e.jsxs(h,{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:s("reports.builder.student")}),e.jsxs(v,{value:d,onValueChange:g,children:[e.jsx(I,{children:e.jsx(w,{placeholder:s("reports.builder.selectStudentPlaceholder")})}),e.jsx(M,{children:i.map(t=>e.jsx(T,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:s("reports.builder.template")}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s(`reports.templates.${j}.name`)})]})]})]}),r&&o&&e.jsxs(c,{className:"bg-card border-0 shadow-soft",children:[e.jsxs(p,{children:[e.jsx(u,{children:s("reports.builder.previewTitle",{name:r.name})}),e.jsx(x,{children:s("reports.builder.previewDesc")})]}),e.jsx(h,{children:e.jsx(k,{student:r,goals:o.goals,trackingEntries:o.entries,emotions:o.emotions,sensoryInputs:o.sensoryInputs})})]})]})})};export{Q as default};
