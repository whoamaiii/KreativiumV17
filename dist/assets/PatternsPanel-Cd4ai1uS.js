import{j as e}from"./vendor-ui-BGGfvU-n.js";import{a as h}from"./vendor-react-BiKKw5Rc.js";import{u as f,C as x,d as g,e as u,B as N,b as p}from"./index-p40y1I9K.js";import{B as y}from"./badge-XQGYYPGp.js";import{H as S,a as v,b as C,h as b,s as P}from"./key-CKub7HOD.js";import{u as w}from"./AnalyticsDashboard-D_6BNLBO.js";import{g as E}from"./analyticsManager-D5rdgc0M.js";import{C as j}from"./clock-3bmf-fze.js";import{I}from"./tabs-Ctr851dG.js";import{T as B}from"./trending-up-B9AG_QY6.js";import{C as A}from"./chart-column-RudVS-6d.js";import{E as H}from"./eye-CGa4_C8K.js";import{B as T}from"./brain-BaLNfPwJ.js";import"./3d-DUDogAyU.js";import"./vendor-utils-BNQKEpbf.js";import"./logger-Bi5o39IC.js";import"./i18n-DNqVcHxj.js";import"./dropdown-menu-7gruBPiX.js";import"./check-JkTn6zF0.js";import"./label-DPtwVyR_.js";import"./slider-BzqSx8sm.js";import"./dialog-91XSgeKl.js";import"./x-CtjkR7Fw.js";import"./analyticsConfig-Di1mAdDI.js";import"./enhancedPatternAnalysis-BSzs8ls5.js";import"./ml-BTt1mEdE.js";import"./progress-DZC4VRn8.js";import"./analyticsExport-NqB-BhO_.js";import"./zap-DStDXklo.js";import"./loader-circle-D6K3-BGk.js";import"./download-B5AHGw6a.js";import"./save-C79c2pc2.js";import"./usePerformanceCache-BszGIQAI.js";import"./diagnostics-BmeDtVon.js";import"./file-text-x8qZG1DU.js";import"./storageUtils-DyonkL-b.js";import"./dataStorage-ZXqbZ8jG.js";const k=i=>{switch(i){case"emotion":return e.jsx(T,{className:"h-4 w-4"});case"sensory":return e.jsx(H,{className:"h-4 w-4"});case"environmental":return e.jsx(A,{className:"h-4 w-4"});default:return e.jsx(B,{className:"h-4 w-4"})}},z=i=>i>.7?"text-green-600":i>.4?"text-yellow-600":"text-orange-600",fe=h.memo(function({filteredData:a}){const{results:o,isAnalyzing:r,error:l,runAnalysis:m}=w({precomputeOnIdle:!1}),{tAnalytics:s}=f();h.useEffect(()=>(m(a),()=>{}),[a,m]);const c=o?.patterns||[],d=E({patterns:o?.patterns||[],correlations:o?.correlations||[],predictiveInsights:o?.predictiveInsights||[]},a.emotions,a.entries);return e.jsxs(e.Fragment,{children:[e.jsxs(x,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between",children:[e.jsx(u,{children:String(s("insights.patterns"))}),e.jsx(N,{variant:"outline",onClick:()=>m(a),disabled:r,children:String(s(r?"states.analyzing":"actions.refreshAnalysis"))})]}),e.jsxs(p,{children:[r&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(j,{className:"h-12 w-12 mx-auto mb-4 motion-safe:animate-spin opacity-50"}),e.jsx("p",{children:String(s("states.analyzing"))})]}),!r&&l&&e.jsx("div",{className:"text-center py-8 text-destructive",children:e.jsx("p",{children:l})}),!r&&!l&&c.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(j,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:String(s("empty.noPatterns"))}),e.jsx("p",{className:"text-sm",children:String(s("insights.noPatterns"))})]}),!r&&!l&&c.length>0&&e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsx(x,{className:"border-l-4 border-l-primary",children:e.jsx(p,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[k(t.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-foreground",children:String(t.pattern??t.name??"Pattern").replace("-"," ").replace(/\b\w/g,n=>n.toUpperCase())}),e.jsxs(S,{openDelay:100,closeDelay:80,children:[e.jsx(v,{asChild:!0,children:e.jsxs("button",{"aria-label":String(s("insights.explainPattern")),className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] leading-none text-muted-foreground hover:bg-accent/40",children:[e.jsx(I,{className:"h-3 w-3"}),String(s("insights.explainPattern"))]})}),e.jsxs(C,{className:"w-80 text-sm leading-relaxed",children:[e.jsx("p",{className:"mb-1 font-medium",children:String(s("insights.patternExplain.title"))}),e.jsx("p",{className:"text-muted-foreground",children:String(t.description??String(s("insights.patternExplain.default")))}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground/80",children:String(s("insights.patternExplain.disclaimer"))})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:String(t.description??"")}),t.recommendations&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:String(s("insights.recommendations"))}),e.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:t.recommendations.map(n=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:n})]},b(n)))})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(y,{variant:"outline",className:z(t.confidence),children:String(s("insights.confidencePercent",{percentage:Math.round(t.confidence*100)}))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[String(s("confidence.calculation.dataPoints")),": ",t.dataPoints]})]})]})})},P(t)))})]})]}),e.jsxs(x,{children:[e.jsx(g,{children:e.jsx(u,{children:String(s("insights.title"))})}),e.jsxs(p,{children:[r&&e.jsx("p",{className:"text-muted-foreground",children:String(s("states.analyzing"))}),!r&&d.length===0&&e.jsx("p",{className:"text-muted-foreground",children:String(s("insights.noPatterns"))}),!r&&d.length>0&&e.jsx("div",{className:"space-y-3",children:d.map((t,n)=>e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-foreground",children:String(s(t.key.replace(/^analytics\./,""),t.params))})},n))})]})]})]})});export{fe as PatternsPanel};
