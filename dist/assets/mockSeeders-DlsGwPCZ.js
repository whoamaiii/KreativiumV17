import{d as l}from"./dataStorage-ZXqbZ8jG.js";import{l as p}from"./logger-Bi5o39IC.js";import"./storageUtils-DyonkL-b.js";const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function D(e,n=0){return(s[e[n+0]]+s[e[n+1]]+s[e[n+2]]+s[e[n+3]]+"-"+s[e[n+4]]+s[e[n+5]]+"-"+s[e[n+6]]+s[e[n+7]]+"-"+s[e[n+8]]+s[e[n+9]]+"-"+s[e[n+10]]+s[e[n+11]]+s[e[n+12]]+s[e[n+13]]+s[e[n+14]]+s[e[n+15]]).toLowerCase()}let v;const x=new Uint8Array(16);function S(){if(!v){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");v=crypto.getRandomValues.bind(crypto)}return v(x)}const k=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:k};function b(e,n,t){if(M.randomUUID&&!e)return M.randomUUID();e=e||{};const o=e.random??e.rng?.()??S();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,D(o)}const w={"early-elementary":[{name:"transition-anxiety",description:"Mild anxiety during transitions and new activities",emotionBias:["anxious","sad"],emotionIntensityRange:[2,4],sensoryBehaviors:["seeking","avoiding"],environmentalFactors:["transition","new activity"],frequency:.3},{name:"sensory-seeking",description:"High need for proprioceptive and tactile input",emotionBias:["excited","happy"],emotionIntensityRange:[3,5],sensoryBehaviors:["seeking"],environmentalFactors:["movement","fidget tools"],frequency:.4},{name:"positive-engagement",description:"High engagement and positive emotions during preferred activities",emotionBias:["happy","excited","calm"],emotionIntensityRange:[4,5],sensoryBehaviors:["neutral","seeking"],environmentalFactors:["structured activity","small group"],frequency:.5}],"late-elementary":[{name:"academic-challenges",description:"Mixed emotions with challenging academic tasks",emotionBias:["anxious","angry"],emotionIntensityRange:[3,4],sensoryBehaviors:["avoiding","neutral"],environmentalFactors:["testing","complex task"],frequency:.25},{name:"peer-interaction-anxiety",description:"Anxiety in social situations and group work",emotionBias:["anxious","sad"],emotionIntensityRange:[2,4],sensoryBehaviors:["avoiding"],environmentalFactors:["group work","crowded space"],frequency:.3},{name:"independence-growth",description:"Growing confidence and independence",emotionBias:["happy","excited","calm"],emotionIntensityRange:[3,5],sensoryBehaviors:["neutral"],environmentalFactors:["independent work","choice activity"],frequency:.4}],"middle-school":[{name:"emotional-regulation",description:"Developing emotional regulation skills",emotionBias:["calm","happy"],emotionIntensityRange:[2,4],sensoryBehaviors:["neutral","seeking"],environmentalFactors:["quiet space","routine"],frequency:.45},{name:"sensory-sensitivity",description:"Increased awareness of sensory preferences",emotionBias:["calm","anxious"],emotionIntensityRange:[3,4],sensoryBehaviors:["avoiding","seeking"],environmentalFactors:["preferred lighting","noise control"],frequency:.35}]};function B(e,n=0){const t=new Date;return t.setDate(t.getDate()-e),n>0&&t.setHours(t.getHours()+Math.random()*n-n/2),t}function c(e){return e[Math.floor(Math.random()*e.length)]}function y(e){const[n,t]=e;return Math.floor(Math.random()*(t-n+1)+n)}function I(e){if(e.grade){const n=e.grade.match(/(\d+)/);if(n){const t=parseInt(n[1]);return t<=2?"early-elementary":t<=5?"late-elementary":"middle-school"}}if(e.dateOfBirth){const n=new Date().getFullYear()-new Date(e.dateOfBirth).getFullYear();return n<=7?"early-elementary":n<=11?"late-elementary":"middle-school"}return"late-elementary"}function F(e){const n=I(e),t=w[n]||w["late-elementary"],o=[];for(const i of t)Math.random()<i.frequency&&o.push(i);return o.length===0&&o.push(c(t)),o.slice(0,3)}function R(e,n,t){const o=["happy","sad","angry","calm","anxious","excited"],i=["noise","transition","new activity","crowded space","bright lights","schedule change","complex task","group work"];let a,r;return t&&Math.random()<.7?(a=c(t.emotionBias),r=y(t.emotionIntensityRange)):(a=c(o),r=y([1,5])),{id:`emotion_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:e,emotion:a,intensity:r,timestamp:n,notes:Math.random()>.7?`Observed during ${c(i)}`:void 0,triggers:Math.random()>.6?[c(i)]:void 0}}function E(e,n,t){const o=["visual","auditory","tactile","vestibular","proprioceptive"],i=["seeking","avoiding","neutral"],a=["classroom","hallway","cafeteria","playground","therapy room"];let r;t&&Math.random()<.6?r=c(t.sensoryBehaviors):r=c(i);const u=y(r==="neutral"?[1,3]:[2,5]);return{id:`sensory_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:e,sensoryType:c(o),response:r,intensity:u,timestamp:n,notes:Math.random()>.7?`Behavior observed in ${c(a)}`:void 0,environment:c(a)}}function U(e,n){const t=["sunny","cloudy","rainy","stormy","snowy"],o=["instruction","transition","free-time","testing","group-work"],i=["bright","dim","natural","fluorescent"];let a=c(o),r=c(i),u=y([1,5]);n&&(n.environmentalFactors.includes("transition")&&Math.random()<.4&&(a="transition"),n.environmentalFactors.includes("testing")&&Math.random()<.3&&(a="testing"),n.environmentalFactors.includes("group work")&&Math.random()<.3&&(a="group-work"),n.environmentalFactors.includes("quiet space")&&Math.random()<.4&&(u=y([1,2])),n.environmentalFactors.includes("noise control")&&Math.random()<.3&&(r="natural"));const m=e.getHours(),d=m<12?"morning":m<17?"afternoon":"evening";return{id:`env_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:e,roomConditions:{temperature:20+Math.random()*8,humidity:40+Math.random()*30,lighting:r,noiseLevel:u},weather:{condition:c(t),temperature:5+Math.random()*25,pressure:990+Math.random()*40},classroom:{activity:a,studentCount:12+Math.floor(Math.random()*16),timeOfDay:d},notes:Math.random()>.8?"Pattern-based environmental data":void 0}}function $(e,n,t){const o=B(n,4),i=[],a=[],r=Math.random()<.6?c(t):void 0,u=Math.ceil(Math.random()*3);for(let d=0;d<u;d++)i.push(R(e.id,o,r));const m=Math.ceil(Math.random()*4);for(let d=0;d<m;d++)a.push(E(e.id,o,r));return{id:`tracking_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:e.id,timestamp:o,emotions:i,sensoryInputs:a,environmentalData:U(o,r),generalNotes:r?`Pattern: ${r.name}`:void 0,version:1}}function q(e,n=30){const t=F(e),o=[];for(let i=n;i>=0;i--)Math.random()>.6||o.push($(e,i,t));return o}function T(e){const n=Math.max(7,Math.min(90,Math.floor(Math.random()*60)+30));return q(e,n)}async function H(e={}){const{forExistingStudents:n=!0,createNewStudents:t=0,batchesPerStudent:o=1}=e;let i=0,a=0;try{if(t>0)for(let m=0;m<t;m++){const d=`demo-${b()}`,h={id:d,name:`Demo Student ${m+1}`};try{if(l.saveStudent)l.saveStudent(h);else{const g=l.getStudents();!g.find(f=>f.id===d)&&l.setStudents&&l.setStudents([...g,h])}}catch(g){p.warn("[seedDemoData] Unable to save new demo student",{id:d,error:g})}}const r=l.getStudents(),u=n?r:r.slice(-t);for(const m of u){i++;for(let d=0;d<Math.max(1,o);d++){const h=T(m.id);for(const g of h)try{l.saveTrackingEntry(g),a++}catch(f){p.error("[seedDemoData] Failed to save tracking entry",{studentId:m.id,error:f})}}}p.info("[seedDemoData] Demo data seeding complete",{totalStudentsAffected:i,totalEntriesCreated:a})}catch(r){p.error("[seedDemoData] Seeding failed",{error:r})}return{totalStudentsAffected:i,totalEntriesCreated:a}}export{H as seedDemoData};
