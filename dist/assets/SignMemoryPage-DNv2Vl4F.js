import{j as e}from"./vendor-ui-BGGfvU-n.js";import{u as I,m as T,C,b as w,B as P,a as U}from"./index-p40y1I9K.js";import{S as k}from"./signData-BWg4zqWR.js";import{a as o}from"./vendor-react-BiKKw5Rc.js";import"./3d-DUDogAyU.js";import"./vendor-utils-BNQKEpbf.js";import"./logger-Bi5o39IC.js";import"./i18n-DNqVcHxj.js";const j=6,G=2,K=10,z=()=>{const{tCommon:r}=I(),{addXP:d}=T(),[M,c]=o.useState([]),[X,m]=o.useState([]),[E,y]=o.useState(0),[u,b]=o.useState(0),[v,N]=o.useState(!1),F=o.useMemo(()=>k.slice(0),[]),p=()=>{N(!1),y(0),b(0),m([]);const s=[...F].sort(()=>Math.random()-.5).slice(0,j),a=[];s.forEach(t=>{a.push({id:`${t.id}-img`,pairKey:t.word,type:"sign",imageUrl:t.imageUrl,revealed:!1,matched:!1}),a.push({id:`${t.id}-txt`,pairKey:t.word,type:"text",revealed:!1,matched:!1})});const n=a.sort(()=>Math.random()-.5);c(n)};o.useEffect(()=>{p()},[]),o.useEffect(()=>{u===j&&j>0&&(N(!0),d(K))},[u,d]);const A=s=>{v||(c(a=>{const n=a[s];if(n.revealed||n.matched)return a;const t=[...a];return t[s]={...n,revealed:!0},t}),m(a=>{const n=[...a,s];return n.length===2&&(y(t=>t+1),setTimeout(()=>{c(t=>{const[g,f]=n,x=t[g],h=t[f];if(!x||!h)return t;if(x.pairKey===h.pairKey&&x.type!==h.type){d(G);const S=t.map((i,l)=>l===g||l===f?{...i,matched:!0}:i);return b(i=>i+1),S}else return t.map((i,l)=>l===g||l===f?{...i,revealed:!1}:i)}),m([])},650)),n}))};return e.jsxs("section",{className:"space-y-6",children:[e.jsx(C,{className:"bg-gradient-card border-0 shadow-soft",children:e.jsxs(w,{className:"p-6 space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:String(r("tegn.memory"))}),e.jsx("p",{className:"text-sm text-muted-foreground",children:String(r("tegn.memoryDesc"))}),e.jsxs("div",{className:"text-sm text-muted-foreground flex gap-4",children:[e.jsxs("span",{children:[String(r("tegn.moves")),": ",E]}),e.jsx("span",{children:String(r("tegn.pairsFound",{count:u}))})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(P,{variant:"outline",onClick:p,children:String(r("tegn.resetGame"))})})]})}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4",children:M.map((s,a)=>{const n=s.revealed||s.matched,t=n?s.type==="sign"?r("tegn.signCardAria",{word:s.pairKey}):r("tegn.textCardAria",{word:s.pairKey}):r("tegn.hiddenCard");return e.jsxs("button",{onClick:()=>A(a),className:U("relative aspect-[3/4] rounded-xl border border-border overflow-hidden transition-transform focus:outline-none focus-visible:ring-2 focus-visible:ring-ring",n?"bg-background":"bg-muted/60 hover:scale-[1.02]"),"aria-label":t,children:[n?s.type==="sign"?e.jsx("img",{src:s.imageUrl,alt:s.pairKey,className:"w-full h-full object-contain p-3"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-lg font-semibold text-foreground",children:s.pairKey}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl text-muted-foreground",children:"?"}),s.matched&&e.jsx("div",{className:"absolute inset-0 ring-2 ring-success/70 rounded-xl pointer-events-none","aria-hidden":"true"})]},s.id)})}),v&&e.jsx(C,{className:"bg-gradient-card border-0 shadow-soft",children:e.jsxs(w,{className:"p-6 space-y-3",children:[e.jsx("div",{className:"text-lg text-foreground",children:String(r("tegn.gameComplete",{bonus:K}))}),e.jsx(P,{onClick:p,children:String(r("tegn.memoryPlayAgain"))})]})})]})};export{z as default};
