import{j as e}from"./vendor-ui-BGGfvU-n.js";import{a as c}from"./vendor-react-BiKKw5Rc.js";import{u as d,C as n,d as m,e as x,b as o}from"./index-p40y1I9K.js";import{B as p}from"./badge-XQGYYPGp.js";import{H as h,a as g,b as j,h as u}from"./key-CKub7HOD.js";import{e as f,E as b}from"./ChartKit-BStub1tR.js";import{e as N}from"./enhancedPatternAnalysis-BSzs8ls5.js";import{I as C}from"./tabs-Ctr851dG.js";import{C as v}from"./chart-column-RudVS-6d.js";import{C as y}from"./clock-3bmf-fze.js";import"./3d-DUDogAyU.js";import"./vendor-utils-BNQKEpbf.js";import"./logger-Bi5o39IC.js";import"./i18n-DNqVcHxj.js";import"./charts-B1guaMDk.js";import"./skeleton-Cw78M60-.js";import"./chartRegistry-BLFZNPaW.js";import"./analyticsConfig-Di1mAdDI.js";import"./ml-BTt1mEdE.js";const K=c.memo(function({filteredData:i}){const{tAnalytics:s}=d(),l=[],a=(i.entries?.length??0)>=10;let t=null;if(a)try{const r=N.generateCorrelationMatrix(i.entries);t=f(r)}catch{t=null}return e.jsxs(n,{className:"bg-gradient-card border-0 shadow-soft",children:[e.jsxs(m,{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx(x,{"data-testid":"environmental-correlations-title",children:String(s("correlations.title"))}),e.jsx("p",{className:"text-sm text-muted-foreground",children:String(s("correlations.subtitle"))})]}),e.jsxs(h,{openDelay:150,closeDelay:100,children:[e.jsx(g,{asChild:!0,children:e.jsxs("button",{"aria-label":String(s("correlations.helpTrigger")),className:"inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs hover:bg-accent/30",children:[e.jsx(C,{className:"h-4 w-4"}),String(s("correlations.helpTrigger"))]})}),e.jsxs(j,{className:"w-80 text-sm leading-relaxed",children:[e.jsx("p",{children:String(s("correlations.helpBody.p1"))}),e.jsx("p",{className:"mt-1",children:String(s("correlations.helpBody.p2"))})]})]})]}),e.jsxs(o,{children:[!a&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:String(s("correlations.empty.title"))}),e.jsx("p",{className:"text-sm",children:String(s("correlations.empty.moreData"))})]}),a&&t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-xl border bg-card",children:e.jsx(b,{option:t,height:420})}),e.jsxs("div",{className:"mt-3 flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{children:String(s("correlations.legend.negative"))}),e.jsx("span",{className:"h-3 w-3 rounded bg-destructive"}),e.jsx("span",{children:String(s("correlations.legend.zero"))}),e.jsx("span",{className:"h-3 w-3 rounded border bg-muted"}),e.jsx("span",{children:String(s("correlations.legend.positive"))}),e.jsx("span",{className:"h-3 w-3 rounded bg-emotion-happy"})]})]}),a&&!t&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(y,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:String(s("correlations.fallback.title"))}),e.jsx("div",{className:"space-y-4 mt-4",children:l.map(r=>e.jsx(n,{className:"border-l-4 border-l-blue-500",children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-medium text-foreground",children:[r.factor1," â†” ",r.factor2]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(p,{variant:r.significance==="high"?"default":"outline",children:[r.significance," ",String(s("correlations.labels.significance"))]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[String(s("correlations.labels.rPrefix")),typeof r.correlation=="number"?r.correlation.toFixed(3):"0.000"]})]})]})})},u(`${r.factor1}-${r.factor2}-${r.significance}`)))})]})]})]})});export{K as CorrelationsPanel};
